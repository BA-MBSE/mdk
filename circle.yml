machine:
  java:
    version: oraclejdk8

compile:
  override:
    - ./gradlew -PbuildNumber=$CIRCLE_BUILD_NUM -PbuildAccess=opensource -PbuildBranch=$CIRCLE_BRANCH --info distZip

test:
  override:
    - "true" # disabling tests until MagicDraw licensing issues are resolved
  post:
    - [ -d build/test-results ] && cp -R build/test-results $CIRCLE_ARTIFACTS/
    - [ -d build/reports] && cp -R build/reports $CIRCLE_ARTIFACTS/

deployment:
  override:
    - ./gradlew -PbuildNumber=$CIRCLE_BUILD_NUM -PbuildAccess=opensource -PbuildBranch=$CIRCLE_BRANCH -Partifactory_user=$ARTIFACTORY_USER -Partifactory_password=$ARTIFACTORY_PASSWORD --info artifactoryPublish